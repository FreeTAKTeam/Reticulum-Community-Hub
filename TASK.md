# TASKS
- 2026-01-19: DONE. Scale WebMap markers by zoom level.
- 2026-01-19: DONE. Fix WebMap SVG marker rendering and normalize NAPSG/Maki icon sizes.
- 2026-01-19: DONE. Make navigation bar collapsable and pinnable.
- 2026-01-18: DONE. Implement Web UI marker management with northbound marker APIs and telemetry event propagation.
- 2026-01-19: DONE. Adjust marker model to use Reticulum identities for Sideband compatibility, including announces and temporal validity.
- 2026-01-17: DONE. Auto-scroll chat history to latest message and adjust fixed height.
- 2026-01-17: DONE. Make chat history panel fixed-height and scrollable.
- 2026-01-17: DONE. Constrain chat history panel to scroll while keeping composer visible.
- 2026-01-17: DONE. Show all inbound hub messages in the All Hub Users view.
- 2026-01-17: DONE. Adjust chat message prefix delimiter to use ">". 
- 2026-01-17: DONE. Hide topic hashes in chat topic list display.
- 2026-01-17: DONE. Prefix outbound chat messages with hub app name loaded at UI startup.
- 2026-01-17: DONE. Deduplicate identities list to avoid repeated names in the Users page.
- 2026-01-17: DONE. Update chat page header title and constrain operator list to hub users with scroll.
- 2026-01-17: DONE. Add aiohttp dependency for PyTAK BasicAuth support.
- 2026-01-17: DONE. Silence Pydantic alias warnings in northbound chat payload models.
- 2026-01-17: DONE. Add gateway runner to start hub + northbound API for chat dispatch.
- 2026-01-17: DONE. Add test_hub.bat to activate venv_linux and run pytest.
- 2026-01-17: DONE. Refresh internal API v1 manifest hashes.
- 2026-01-16: DONE. Add Cosmic UI combobox styling for BaseSelect.
- 2026-01-16: DONE. Implement Reticulum Community Hub Chat & LXMF Client specification.
- 2026-01-16: バ. Persist announce display names and expose them to the UI.
- 2026-01-16: ?. Reorganize documentation structure, refresh README, and add architecture/user docs.
- 2026-01-14: ?. Reject invalid config payloads when applying config.
- 2026-01-14: ?. Route TelemetryRequest commands when the Command field is used.
- 2026-01-14: DONE. Fix LXMF TelemetryRequest handling for string numeric keys.
- 2026-01-13: ?. Add internal API spec and Codex task plan.
- 2026-01-13: ? Guard inbound message event dispatch when optional state is missing.
- 2026-01-12: ? Fix missing sqlalchemy dependency in the test environment.
- 2026-01-12: ? Adjust Codex auto-fix workflow to match repository CI.
- 2026-01-12: ? Add northbound file/image route tests and bump version.
- 2026-01-12: ? Create venv_linux for running tests.
- 2026-01-13: ? Address websocket broadcaster test coverage and sync execution.
- 2026-01-13: ? Fix northbound websocket topic filtering and event dispatch.
- 2026-01-12: ? Implement northbound FastAPI REST/WebSocket interface for the WebUI.
- 2026-01-11: ? Implement RTH Core UI application as documented.
- 2026-01-09: ✅ Fix config backup timestamp timezone usage.
- 2026-01-09: ✅ Add protected/public commands, REST docs, telemetry topic filtering, and config management.
- 2026-01-09: ✅ Align UI design doc with current command/API surface.
- 2025-02-14: ✅ Make messaging more robust by limiting telemetry broadcasts, suppressing echo replies, and listing commands for bad requests.
- 2025-11-19: ✅ Preserve `RejectTests=0` values when subscribing or patching subscribers.
- 2025-11-19: ✅ Decode announce metadata using LXMF helper and ensure identity labels follow msgpack names.
- 2025-11-19: ✅ Ensure create-subscriber commands preserve `RejectTests=0` values.
- 2025-11-19: ✅ Refresh topic subscriber cache after subscription changes to deliver messages immediately.
- 2025-11-19: ✅ Persist joined client list across Reticulum Telemetry Hub sessions.
- 2025-11-19: ✅ Handle string-wrapped LXMF commands and prompt for missing command parameters interactively.
- 2025-11-19: ✅ Accept snake_case command fields when prompting for missing data.
- 2025-11-20: ✅ Normalize Sideband-wrapped commands to preserve telemetry commands.
- 2025-11-20: ✅ Normalize Sideband-wrapped command payloads carrying JSON objects.
- 2025-11-20: ✅ Accept positional LXMF command parameters and log unknown commands.
- 2025-11-20: ✅ Stop unsolicited "Telemetry data" LXMF broadcasts to known identities.
- 2025-11-20: ✅ Detect escape-prefixed telemetry payloads and normalize commands before broadcasting.
- 2025-11-20: ✅ Suppress broadcasts when escape-prefixed commands are detected in plaintext bodies.
- 2025-11-28: ✅ Add TAK CoT connector service for broadcasting location updates.
- 2025-11-28: ✅ Convert LXMF chat traffic into CoT chat events with topic-aware routing.
- 2025-11-28: ✅ Ensure CoT chat events generate unique UIDs for rapid messages.
- 2025-11-28: ✅ Consolidate hub configuration (including TAK) into a unified ``config.ini`` while preserving CLI flag overrides.
- 2025-11-29: ✅ Add Google-style docstrings to API service methods to clarify IDs, metadata defaults, and error handling.
- 2025-11-29: ✅ Refresh README installation steps, dependency guidance, and link targets.
- 2025-11-29: ✅ Assign TAK location events to the originating Reticulum identity using display names when available or LXMF addresses otherwise.
- 2025-11-29: ✅ Normalize TAK connector identifiers derived from pretty-formatted hashes.
- 2025-11-29: ✅ Raise coverage to at least 90% and correct formatting issues.
- 2025-11-29: ✅ Add RNS import to TAK connector and test send_latest_location to avoid NameError.
- 2025-11-29: ✅ Extend TakConnector.build_event to include group defaults and track metadata.
- 2025-11-29: ✅ Add GeoChat detail construction for chat events including hierarchy links.
- 2025-11-29: ✅ Log TAK event types and JSON payloads before transmission.
- 2025-11-29: ✅ Convert incoming telemetry to TAK CoT events using sender UIDs and display names.
- 2025-11-30: ✅ Avoid rerunning event loops when dispatching telemetry CoT events.
- 2025-11-30: ✅ Fix TAK GeoChat payload structure and hierarchy.
- 2025-12-02: ✅ Ensure TAK connection status logging and keepalive pongs.
- 2025-12-03: ✅ Ensure TAK COR events use TCP unicast with TAK_PROTO=0 and FTS_COMPAT=1 defaults.
- 2025-12-03: ✅ Wrap CoT JSON payloads with the event root type to match ATAK expectations.
- 2025-12-03: ✅ Ensure TAK connector emits a takPong keepalive every 60 seconds.
- 2025-12-03: ✅ Maintain overall test coverage at or above 90%.
- 2025-12-04: ✅ Format codebase and resolve lint configuration issues identified during testing.
- 2025-12-05: ✅ Persist PyTAK sessions with shared queues, add hello/ping keepalives, and extend TAK connector coverage.
- 2025-12-05: ✅ Keep telemetry payloads out of LXMF message bodies and rely on field delivery only.
- 2025-12-05: ✅ Restore TAK connector keepalive delivery and connection visibility by running PyTAK in a persistent background loop.
- 2025-12-05: ✅ Periodically dispatch the latest unique telemetry as CoT updates from the TAK connector.
- 2025-12-05: ✅ Mirror LXMF chat messages to TAK servers using the required CoT chat template.
- 2025-12-05: ✅ Refresh README and documentation under `docs/`.
- 2025-12-17: ✅ Introduce a bounded LXMF outbound queue with worker fan-out and backpressure.
- 2025-12-17: ✅ Resolve flake8 unused variable warning in TAK connector tests.
- 2025-12-17: ✅ Close SQLite retry sessions to avoid leaks when lock contention occurs.
- 2025-12-24: ✅ Update README installation instructions for PyPI virtual environment setup.
- 2025-12-26: ✅ Expand getAppInfo to return configured metadata and auto-respond to unjoined LXMF clients.
- 2025-12-27: ✅ Review and test the code and fix linter issues.
- 2025-12-27: ✅ Reorder LXMF daemon imports to satisfy flake8 and bump version to 0.62.0.
- 2025-12-28: ✅ Add file and image storage configuration paths and tests.
- 2025-12-28: ✅ Ensure the python-app workflow installs all project dependencies.
- 2025-12-28: ✅ Document API models and storage session helpers to satisfy lint checks.
- 2025-12-28: ✅ Expose HubStorage session factory to satisfy API topic patch tests.
- 2025-12-28: ✅ Resolve pylint warnings in ATAK CoT helpers and refresh package metadata.
- 2025-12-28: ✅ Fix Iterable import for PyTAK client to resolve pylint error.
- 2025-12-28: ✅ Analyze code with pylint and fix issues.
- 2025-12-28: ✅ Add file and image attachment storage APIs and tests.
- 2025-12-28: ✅ Address gpsdclient import handling and lint cleanups.
- 2025-12-28: ✅ Add LXMF attachment listing/retrieval commands and persist inbound LXMF file/image fields.
- 2025-12-28: ✅ Resolve TAK connector test cleanup to avoid unraisable exceptions.
- 2025-12-28: ✅ Switch linting to Ruff and retire flake8 configuration.
- 2025-12-28: ✅ Replace CI flake8 linting with Ruff and remove the flake8 configuration file.
- 2025-12-28: ✅ Improve test coverage and resolve Ruff lint findings.
- 2025-12-28: ✅ Resolve reported pylint import and undefined variable errors.
- 2025-12-28: ✅ Resolve pylint not-callable warnings for LXMF router hooks.
- 2025-12-29: ✅ Resolve DummyRouter pylint no-member warnings in Reticulum server initialization.
- 2025-12-31: ✅ Return help text when an unknown command is received.
- 2026-01-02: ✅ Add coverage for file and image command CRUD flows (ListFiles/ListImages) and resolve discovered issues.
- 2026-01-02: ✅ Add Examples command returning detailed help while Help lists commands only.
- 2026-01-02: ?. Decode base64/list attachment payloads when storing inbound files.
- 2026-01-02: ?. Reply to attachment errors and accept case-insensitive payload keys.
- 2026-01-02: ?. Create PLANNING.md with goals, style, and architecture guidance.


- 2026-01-02: ?. Support list-form attachment payloads from Sideband.
- 2026-01-02: ?. Reply when command handling throws to avoid silent failures.
- 2026-01-02: ?. Reply to malformed escape-prefixed command payloads.

- 2026-01-02: ?. Send fallback text when attachment responses fail to deliver.
- 2026-01-02: ?. Send text-only mirrors for attachment command replies.
- 2026-01-02: ?. Send list-form attachment payloads for RetrieveFile/RetrieveImage responses.
- 2026-01-02: ?. Infer image media types to preserve file extensions.
- 2026-01-02: ?. Document file/image attachment workflows in README.
- 2026-01-02: ?. Update README license text to EPL.
- 2026-01-03: ? Test project and fix lint issues.
- 2026-01-03: ? Resolve command handler lint warnings in delivery callback.
- 2026-01-05: ? Fix unknown command response typo and rename RetrieveTopic command.
- 2026-01-12: ? Add multi-agent Codex issue workflow and bump version.
