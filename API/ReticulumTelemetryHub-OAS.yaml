openapi: 3.0.1
info:
  title: ReticulumTelemetryHub
  version: '2025.12.28'
  description: >-
    Abstract service for Reticulum Telemetry Hub.   This API manages subscribers, topics, client lists,  and provides hub?join/leave functionality over a Reticulum?based network.
  contact:
    name: FTTeam
    url: https://github.com/FreeTAKTeam
    email: FreeTAKTeam@gmail.com
  license:
    name: EPL
paths:
  /Help:
    get:
      x-scope: public
      x-lxmf-command: Help
      tags:
       - Command
      summary: Return the list of supported commands.
      responses:
        '200':
          description: Markdown formatted command list.
          content:
            text/plain:
              schema:
                type: string
  /Examples:
    get:
      x-scope: public
      x-lxmf-command: Examples
      tags:
       - Command
      summary: Return command descriptions and JSON payload examples.
      responses:
        '200':
          description: Markdown formatted command examples.
          content:
            text/plain:
              schema:
                type: string
  /Status:
    get:
      x-scope: protected
      x-lxmf-command: GetStatus
      tags:
       - Status
      summary: Return dashboard status metrics.
      responses:
        '200':
          description: Status snapshot for admin dashboards.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /Events:
    get:
      x-scope: protected
      x-lxmf-command: ListEvents
      tags:
       - Status
      summary: Return recent hub events.
      responses:
        '200':
          description: Recent event entries.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Event'
  /Telemetry:
    get:
      x-scope: public
      x-lxmf-command: TelemetryRequest
      tags:
       - Telemetry
      summary: Retrieve telemetry snapshots since a timestamp.
      parameters:
        - $ref: '#/components/parameters/telemetrySince'
        - $ref: '#/components/parameters/topicId'
      responses:
        '200':
          description: Telemetry stream entries.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TelemetryResponse'
  /Config:
    get:
      x-scope: protected
      x-lxmf-command: GetConfig
      tags:
       - Config
      summary: Return the raw config.ini content.
      responses:
        '200':
          description: Config content.
          content:
            text/plain:
              schema:
                type: string
    put:
      x-scope: protected
      x-lxmf-command: ApplyConfig
      tags:
       - Config
      summary: Apply a new config.ini payload.
      requestBody:
        $ref: '#/components/requestBodies/ConfigPayload'
      responses:
        '200':
          description: Apply result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfigApplyResult'
  /Config/Validate:
    post:
      x-scope: protected
      x-lxmf-command: ValidateConfig
      tags:
       - Config
      summary: Validate a config.ini payload without applying.
      requestBody:
        $ref: '#/components/requestBodies/ConfigPayload'
      responses:
        '200':
          description: Validation result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfigValidation'
  /Config/Rollback:
    post:
      x-scope: protected
      x-lxmf-command: RollbackConfig
      tags:
       - Config
      summary: Roll back config.ini using a backup.
      requestBody:
        $ref: '#/components/requestBodies/ConfigRollback'
      responses:
        '200':
          description: Rollback result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfigRollbackResult'
  /Command/FlushTelemetry:
    post:
      x-scope: protected
      x-lxmf-command: FlushTelemetry
      tags:
       - Command
      summary: Delete stored telemetry snapshots.
      responses:
        '200':
          description: Deletion result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlushTelemetryResult'
  /Command/ReloadConfig:
    post:
      x-scope: protected
      x-lxmf-command: ReloadConfig
      tags:
       - Command
      summary: Reload config.ini from disk.
      responses:
        '200':
          description: Reloaded configuration snapshot.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReticulumInfo'
  /Command/DumpRouting:
    get:
      x-scope: protected
      x-lxmf-command: DumpRouting
      tags:
       - Command
      summary: Return connected destination hashes.
      responses:
        '200':
          description: Routing summary.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoutingSummary'
  /Identities:
    get:
      x-scope: protected
      x-lxmf-command: ListIdentities
      tags:
       - Identity
      summary: List identity moderation status entries.
      responses:
        '200':
          description: Identity statuses.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/IdentityStatus'
  /Client/{id}/Ban:
    post:
      x-scope: protected
      x-lxmf-command: BanIdentity
      tags:
       - Identity
      summary: Ban an identity.
      parameters:
        - $ref: '#/components/parameters/identityPath'
      responses:
        '200':
          description: Updated identity status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityStatus'
  /Client/{id}/Unban:
    post:
      x-scope: protected
      x-lxmf-command: UnbanIdentity
      tags:
       - Identity
      summary: Remove ban/blackhole for an identity.
      parameters:
        - $ref: '#/components/parameters/identityPath'
      responses:
        '200':
          description: Updated identity status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityStatus'
  /Client/{id}/Blackhole:
    post:
      x-scope: protected
      x-lxmf-command: BlackholeIdentity
      tags:
       - Identity
      summary: Blackhole an identity.
      parameters:
        - $ref: '#/components/parameters/identityPath'
      responses:
        '200':
          description: Updated identity status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityStatus'
  /RTH:
    post:
      x-scope: public
      x-lxmf-command: join
      tags:
       - RTH
      description: >-
        join a RTH server
      operationId: RTHjoin
      parameters:
        - $ref: '#/components/parameters/identity'
      responses:
        '200':
          description: simple text based return value
          content:
            text/plain:
              schema:
                type: boolean
    put:
      x-scope: public
      x-lxmf-command: leave
      tags:
       - RTH
      description: >-
      operationId: RTHLeave
      responses:
        '200':
          description: simple text based return value
          content:
            text/plain:
              schema:
                type: boolean
  /Topic/{id}:
    get:
      x-scope: public
      x-lxmf-command: RetrieveTopic
      tags:
       - Topic
      description: >-
      summary: retrieve an existing Topic record based on the provided ID.
      operationId: RetrieveTopic
      parameters:
        - $ref: '#/components/parameters/id'
      responses:
        '200':
          $ref: '#/components/responses/200Topic_get'
  /Client:
    get:
      x-scope: protected
      x-lxmf-command: ListClients
      tags:
       - Client
      description: >-
        Lists all clients currently connected to RTH, including their Reticulum identities and connection metadata
      operationId: ListClients
      responses:
        '200':
          $ref: '#/components/responses/200Client_get'
  /api/v1/app/info:
    get:
      x-scope: public
      x-lxmf-command: getAppInfo
      tags:
       - Reticulum
      description: >-
        returns the configured application metadata and component versions
      operationId: getAppInfo
      responses:
        '200':
          description: Application info including Reticulum and LXMF versions.
          content:
            text/plain:
              schema:
                  $ref: '#/components/schemas/ReticulumInfo'
  /File:
    get:
      x-scope: public
      x-lxmf-command: ListFiles
      tags:
       - File
      summary: List stored file attachments.
      operationId: ListFiles
      responses:
        '200':
          description: Stored file metadata.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FileAttachment'
  /File/{id}:
    get:
      x-scope: public
      x-lxmf-command: RetrieveFile
      tags:
       - File
      summary: Retrieve a stored file by its ID.
      operationId: RetrieveFile
      parameters:
        - $ref: '#/components/parameters/fileId'
      responses:
        '200':
          description: Stored file metadata (binary delivered via LXMF fields for LXMF clients).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileAttachment'
  /Image:
    get:
      x-scope: public
      x-lxmf-command: ListImages
      tags:
       - Image
      summary: List stored images.
      operationId: ListImages
      responses:
        '200':
          description: Stored image metadata.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FileAttachment'
  /Image/{id}:
    get:
      x-scope: public
      x-lxmf-command: RetrieveImage
      tags:
       - Image
      summary: Retrieve a stored image by its ID.
      operationId: RetrieveImage
      parameters:
        - $ref: '#/components/parameters/fileId'
      responses:
        '200':
          description: Stored image metadata (binary delivered via LXMF fields for LXMF clients).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileAttachment'
  /Topic:
    post:
      x-scope: protected
      x-lxmf-command: CreateTopic
      tags:
       - Topic
      description: >-
      summary: Creates a new Topic record.
      operationId: CreateTopic
      requestBody:
        $ref: '#/components/requestBodies/Topic'
      responses:
        '200':
          $ref: '#/components/responses/200Topic_post'
    delete:
      x-scope: protected
      x-lxmf-command: DeleteTopic
      tags:
       - Topic
      description: >-
      summary: Deletes an existing Topic record based on the provided ID.
      operationId: DeleteTopic
      parameters:
        - $ref: '#/components/parameters/ID'
      responses:
        '200':
          $ref: '#/components/responses/200Topic_delete'
    get:
      x-scope: public
      x-lxmf-command: ListTopic
      tags:
       - Topic
      description: >-
      summary: Retrieves a list of all Topic
      operationId: ListTopic
      responses:
        '200':
          $ref: '#/components/responses/200Topic_get'
    patch:
      x-scope: protected
      x-lxmf-command: PatchTopic
      tags:
       - Topic
      description: >-
      summary: Updates an existing Topic record.
      operationId: PatchTopic
      requestBody:
        $ref: '#/components/requestBodies/Topic'
      responses:
        '200':
          $ref: '#/components/responses/200Topic_patch'
  /Topic//Subscribe:
    post:
      x-scope: public
      x-lxmf-command: SubscribeTopic
      tags:
       - SubscribeTopic
      description: >-
        allow clients to subscribe or unsubscribe to specific message topics or telemetry streams,
      operationId: SubscribeTopic
      responses:
        '200':
          description: simple text based return value
          content:
            text/plain:
              schema:         
                $ref: '#/components/schemas/Subscriber'
  /Topic/Associate:
    post:
      x-scope: protected
      x-lxmf-command: AssociateTopicID
      tags:
       - Topic
      summary: Associate an attachment upload with a TopicID.
      requestBody:
        $ref: '#/components/requestBodies/Topic'
      responses:
        '200':
          description: Association acknowledged.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Topic'
  /Subscriber/{id}:
    get:
      x-scope: protected
      x-lxmf-command: RetreiveSubscriber
      tags:
       - Subscriber
      description: >-
      summary: retrieve an existing Subscriber record based on the provided ID.
      operationId: RetreiveSubscriber
      parameters:
        - $ref: '#/components/parameters/id'
      responses:
        '200':
          $ref: '#/components/responses/200Subscriber_get'
  /Subscriber/Add:
    post:
      x-scope: protected
      x-lxmf-command: AddSubscriber
      tags:
       - Subscriber
      description: >-
      operationId: AddSubscriber
      responses:
        '200':
          description: simple text based return value
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/Subscriber'
  /Subscriber:
    post:
      x-scope: protected
      x-lxmf-command: CreateSubscriber
      tags:
       - Subscriber
      description: >-
      summary: Creates a new Subscriber record.
      operationId: CreateSubscriber
      requestBody:
        $ref: '#/components/requestBodies/Subscriber'
      responses:
        '200':
          $ref: '#/components/responses/200Subscriber_post'
    delete:
      x-scope: protected
      x-lxmf-command: DeleteSubscriber
      tags:
       - Subscriber
      description: >-
      summary: Deletes an existing Subscriber record based on the provided ID.
      operationId: DeleteSubscriber
      parameters:
        - $ref: '#/components/parameters/ID'
      responses:
        '200':
          $ref: '#/components/responses/200Subscriber_delete'
    get:
      x-scope: protected
      x-lxmf-command: ListSubscriber
      tags:
       - Subscriber
      description: >-
      summary: Retrieves a list of all Subscriber
      operationId: ListSubscriber
      responses:
        '200':
          $ref: '#/components/responses/200Subscriber_get'
    patch:
      x-scope: protected
      x-lxmf-command: PatchSubscriber
      tags:
       - Subscriber
      description: >-
      summary: Updates an existing Subscriber record.
      operationId: PatchSubscriber
      requestBody:
        $ref: '#/components/requestBodies/Subscriber'
      responses:
        '200':
          $ref: '#/components/responses/200Subscriber_patch'

components:
  schemas:
    Subscriber:
      allOf:
        - type: object
          properties:
            Destination:
              type: integer
              description: >-
                the destination hash
            RejectTests:
              type: integer
              description: >-
    Topic:
      allOf:
        - type: object
          properties:
            TopicName:
              type: string
              description: >-
            TopicPath:
              type: string
              description: >-
            TopicDescription:
              type: string
              description: >-
            TopicID:
              type: string
              description: >-
    FileAttachment:
      type: object
      description: Metadata for a stored file or image attachment.
      properties:
        FileID:
          type: integer
          description: Numeric identifier assigned by the hub.
        Name:
          type: string
          description: Attachment display name.
        Path:
          type: string
          description: Filesystem path where the attachment is stored.
        Category:
          type: string
          description: Attachment category (file or image).
        MediaType:
          type: string
          description: MIME type when provided.
        Size:
          type: integer
          description: Attachment size in bytes.
        CreatedAt:
          type: string
          format: date-time
          description: When the attachment metadata was created.
        UpdatedAt:
          type: string
          format: date-time
          description: When the attachment metadata was last updated.
    Client:
      allOf:
        - type: object
          properties:
            lastSeen:
              type: string
              format: date
              description: >-
    Error:
      description: Error
    ReticulumInfo:
      type: object
      description: Summarizes the  Reticulum node and application configuration.
      properties:
        is_transport_enabled:
          type: boolean
          description: Indicates whether Reticulum transport mode is enabled.
        is_connected_to_shared_instance:
          type: boolean
          description: True when the node is linked to a shared Reticulum instance.
        reticulum_config_path:
          type: string
          description: Filesystem path to the Reticulum configuration.
        database_path:
          type: string
          description: Filesystem path to the Reticulum database.
        storage_path:
          type: string
          description: Root path where Reticulum stores persistent data.
        file_storage_path:
          type: string
          description: Folder where file attachments are stored (defaults to ``<storage_dir>/files``).
        image_storage_path:
          type: string
          description: Folder where image artifacts are stored (defaults to ``<storage_dir>/images``).
        app_name:
          type: string
          description: Application display name configured in ``config.ini``.
        rns_version:
          type: string
          description: Installed Reticulum (RNS) version string.
        lxmf_version:
          type: string
          description: Installed LXMF library version.
        app_version:
          type: string
          description: Version of the Reticulum Telemetry Hub application.
        app_description:
          type: string
          description: Human readable description for the Telemetry Hub.
    Status:
      type: object
      description: Dashboard status snapshot.
      properties:
        uptime_seconds:
          type: integer
        clients:
          type: integer
        topics:
          type: integer
        subscribers:
          type: integer
        files:
          type: integer
        images:
          type: integer
        telemetry:
          $ref: '#/components/schemas/TelemetryStats'
    TelemetryStats:
      type: object
      description: Telemetry ingestion counters.
      properties:
        ingest_count:
          type: integer
        last_ingest_at:
          type: string
          nullable: true
    Event:
      type: object
      description: Recent event entry.
      properties:
        timestamp:
          type: string
        type:
          type: string
        message:
          type: string
        metadata:
          type: object
    TelemetryResponse:
      type: object
      description: Telemetry stream response payload.
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/TelemetryEntry'
    TelemetryEntry:
      type: object
      properties:
        peer_destination:
          type: string
        timestamp:
          type: integer
        telemetry:
          type: object
    IdentityStatus:
      type: object
      description: Identity moderation status.
      properties:
        Identity:
          type: string
        Status:
          type: string
        LastSeen:
          type: string
          nullable: true
        Metadata:
          type: object
        IsBanned:
          type: boolean
        IsBlackholed:
          type: boolean
    ConfigValidation:
      type: object
      properties:
        valid:
          type: boolean
        errors:
          type: array
          items:
            type: string
    ConfigApplyResult:
      type: object
      properties:
        applied:
          type: boolean
        config_path:
          type: string
        backup_path:
          type: string
          nullable: true
    ConfigRollbackResult:
      type: object
      properties:
        rolled_back:
          type: boolean
        backup_path:
          type: string
          nullable: true
        error:
          type: string
          nullable: true
    FlushTelemetryResult:
      type: object
      properties:
        deleted:
          type: integer
    RoutingSummary:
      type: object
      properties:
        destinations:
          type: array
          items:
            type: string
  parameters:
    identity:
      name: identity
      required: true
      description: >-
        TODO
      schema:
        type: string
      in: query
    ID:
      name: id
      required: true
      description: >-
        TODO
      schema:
        type: string
      in: query
    id:
      name: id
      required: true
      description: >-
        TODO
      schema:
        type: string
      in: path
    fileId:
      name: id
      required: true
      description: Numeric identifier for a stored file or image.
      schema:
        type: integer
      in: path
    telemetrySince:
      name: since
      required: true
      description: Unix timestamp (seconds) to start telemetry snapshots from.
      schema:
        type: integer
      in: query
    topicId:
      name: topic_id
      required: false
      description: Optional topic identifier to scope telemetry results.
      schema:
        type: string
      in: query
    identityPath:
      name: id
      required: true
      description: Identity hash to modify.
      schema:
        type: string
      in: path
  responses:
    200Topic_get:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Topic'
    200Client_get:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Client'
    200Topic_post:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Topic'
    200Topic_delete:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Topic'
    200Topic_patch:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Topic'
    200Subscriber_get:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscriber'
    200Subscriber_post:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscriber'
    200Subscriber_delete:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscriber'
    200Subscriber_patch:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscriber'
    '200':
      description: OK
    '201':
      description: Added Object
    '202':
      description: Accepted
    '204':
      description: Deleted
    '400':
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '403':
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '404':
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '405':
      description: Method Not allowed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '409':
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '501':
      description: Not Implemented
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    '503':
      description: Service Unavailable
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    'Error':
      description: Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  requestBodies:
    Subscriber:
      description: >-
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscriber'
      required: true
    Topic:
      description: >-
        a topic is an argument that can be subscribe to receive notifications
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Topic'
      required: true
    ConfigPayload:
      description: Raw config.ini payload.
      content:
        text/plain:
          schema:
            type: string
      required: true
    ConfigRollback:
      description: Optional rollback payload specifying a backup path.
      content:
        application/json:
          schema:
            type: object
            properties:
              backup_path:
                type: string
      required: false
x-uml-relationships:
  
